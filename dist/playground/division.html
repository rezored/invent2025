<!DOCTYPE html><html lang="bg" class="scroll-smooth dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Playground | Писмено деление</title><!-- Global Styles --><link rel="stylesheet" href="/styles/tailwind.css"><!-- Meta Tags --><meta name="description" content="Invent2025 - Venture Studio &#38; Engineering Lab"><meta name="author" content="Kalin Dimitrov"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><!-- Icons --><link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet"><!-- Favicon --><!-- Favicon --><link rel="icon" type="image/x-icon" href="/assets/favicon/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png"><link rel="manifest" href="/assets/favicon/site.webmanifest"><link rel="stylesheet" href="/_astro/about.DLLVhM1N.css">
<style>#steps[data-astro-cid-y2iux7dg]::-webkit-scrollbar{height:8px}#steps[data-astro-cid-y2iux7dg]::-webkit-scrollbar-track{background:transparent}#steps[data-astro-cid-y2iux7dg]::-webkit-scrollbar-thumb{background:#ffffff1a;border-radius:10px}#steps[data-astro-cid-y2iux7dg]::-webkit-scrollbar-thumb:hover{background:#fff3}.animate-in[data-astro-cid-y2iux7dg]{animation-fill-mode:forwards}
</style></head> <body class="bg-background-light dark:bg-background-dark text-slate-800 dark:text-slate-200 antialiased font-sans selection:bg-primary/20 selection:text-primary min-h-screen flex flex-col"> <!-- Ambient Background --> <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden"> <div class="absolute top-0 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl -translate-y-1/2"></div> <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-accent/5 rounded-full blur-3xl translate-y-1/2"></div> </div> <div class="relative z-10 flex-1 flex flex-col w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8"> <header class="sticky top-0 z-50 bg-white/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-border-dark mb-8"> <div class="flex items-center justify-between h-20"> <a href="/" class="flex items-center gap-3 group"> <img src="/assets/invent_2025_logo_icon.svg" alt="Invent2025 Logo" class="w-10 h-10 group-hover:opacity-80 transition-opacity"> <div> <h1 class="text-xl font-bold tracking-tight font-mono">
INVENT<span class="text-primary">2025</span> </h1> <p class="text-[10px] text-slate-400 uppercase tracking-widest leading-none">
Venture Studio
</p> </div> </a> <nav class="hidden lg:flex items-center gap-8"> <a class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" href="/about">За Мен</a> <a class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" href="/ventures">Продукти</a> <a class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" href="/portfolio">WP Портфолио</a> <a class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-primary transition-colors" href="/blog">Лабораторията</a> <a class="px-5 py-2.5 rounded-lg bg-primary hover:bg-blue-600 text-white text-sm font-bold transition-all shadow-lg shadow-primary/20" href="mailto:kalin.dimitrov@invent2025.org"> Работете с нас </a> <div class="flex items-center gap-2 pl-4"> <a href="/en" class="text-xs font-bold text-slate-500 hover:text-slate-700 dark:hover:text-slate-300">EN</a> <span class="text-slate-300">/</span> <a href="/" class="text-xs font-bold text-primary">BG</a> </div> </nav> <button id="mobile-menu-btn" class="lg:hidden p-2 rounded-lg hover:bg-surface-light dark:hover:bg-slate-800 transition-colors z-50 relative"> <span class="material-symbols-outlined text-slate-600 dark:text-slate-300 transition-transform duration-300" id="menu-icon">menu</span> </button> </div> </header> <!-- Mobile Menu Overlay --> <div id="mobile-menu" class="fixed inset-0 z-40 bg-background-light dark:bg-background-dark backdrop-blur-xl flex flex-col items-center justify-start pt-32 gap-8 opacity-0 pointer-events-none transition-all duration-300"> <a class="text-2xl font-medium text-slate-800 dark:text-slate-200 hover:text-primary transition-colors" href="/about">За Мен</a> <a class="text-2xl font-medium text-slate-800 dark:text-slate-200 hover:text-primary transition-colors" href="/ventures">Продукти</a> <a class="text-2xl font-medium text-slate-800 dark:text-slate-200 hover:text-primary transition-colors" href="/portfolio">WP Портфолио</a> <a class="text-2xl font-medium text-slate-800 dark:text-slate-200 hover:text-primary transition-colors" href="/blog">Лабораторията</a> <div class="flex items-center gap-6"> <a href="/en" class="text-xl font-bold text-slate-500">EN</a> <a href="/" class="text-xl font-bold text-primary">BG</a> </div> <a class="px-8 py-3 rounded-full bg-primary hover:bg-blue-600 text-white text-lg font-bold transition-all shadow-xl shadow-primary/20" href="mailto:kalin.dimitrov@invent2025.org"> Работете с нас </a> </div> <script type="module">const i=()=>{const d=document.getElementById("mobile-menu-btn"),o=document.getElementById("mobile-menu"),e=document.getElementById("menu-icon");let t=!1;if(!d||!o||!e)return;const s=n=>{t=n,t?(o.classList.remove("opacity-0","pointer-events-none"),e.textContent="close",e.style.transform="rotate(90deg)",document.body.style.overflow="hidden"):(o.classList.add("opacity-0","pointer-events-none"),e.textContent="menu",e.style.transform="rotate(0deg)",document.body.style.overflow="")};d.addEventListener("click",()=>s(!t)),o.querySelectorAll("a").forEach(n=>{n.addEventListener("click",()=>s(!1))}),document.addEventListener("keydown",n=>{n.key==="Escape"&&t&&s(!1)}),window.addEventListener("resize",()=>{window.innerWidth>=1024&&t&&s(!1)})};i();</script>   <main class="flex-1 max-w-4xl mx-auto w-full py-12 px-4 shadow-2xl relative z-10" data-astro-cid-y2iux7dg> <div class="mb-8 border-b border-border-dark pb-6" data-astro-cid-y2iux7dg> <h1 class="text-4xl font-bold mb-2 tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-primary to-accent" data-astro-cid-y2iux7dg>
Писмено деление
</h1> <p class="text-slate-400 text-lg leading-relaxed" data-astro-cid-y2iux7dg>
Показва стъпка по стъпка делението до край или период.
</p> </div> <div class="bg-surface-dark border border-border-dark p-6 md:p-10 rounded-3xl shadow-2xl relative overflow-hidden group" data-astro-cid-y2iux7dg> <div class="scanline" data-astro-cid-y2iux7dg></div> <!-- Controls --> <div class="flex flex-wrap items-end gap-6 mb-10 relative z-10" data-astro-cid-y2iux7dg> <div class="flex-1 min-w-[120px]" data-astro-cid-y2iux7dg> <label class="block text-xs font-mono uppercase text-slate-500 mb-2 tracking-widest" data-astro-cid-y2iux7dg>Делимо</label> <input id="a" type="number" value="22" class="w-full bg-background-dark/50 border border-border-dark rounded-xl px-4 py-3 text-white text-xl font-mono focus:border-primary focus:ring-1 focus:ring-primary/30 outline-none transition-all" data-astro-cid-y2iux7dg> </div> <div class="text-center text-2xl font-mono pb-3 text-slate-500" data-astro-cid-y2iux7dg>
:
</div> <div class="flex-1 min-w-[120px]" data-astro-cid-y2iux7dg> <label class="block text-xs font-mono uppercase text-slate-500 mb-2 tracking-widest" data-astro-cid-y2iux7dg>Делител</label> <input id="b" type="number" value="7" class="w-full bg-background-dark/50 border border-border-dark rounded-xl px-4 py-3 text-white text-xl font-mono focus:border-primary focus:ring-1 focus:ring-primary/30 outline-none transition-all" data-astro-cid-y2iux7dg> </div> <div class="flex gap-3" data-astro-cid-y2iux7dg> <button id="goBtn" class="px-8 py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary/80 active:scale-95 transition-all shadow-lg shadow-primary/20 h-[52px]" data-astro-cid-y2iux7dg>
Покажи
</button> <button id="clearBtn" class="px-4 py-3 bg-slate-800 text-slate-300 font-bold rounded-xl hover:bg-slate-700 active:scale-95 transition-all h-[52px]" title="Изчисти" data-astro-cid-y2iux7dg> <span class="material-symbols-outlined" data-astro-cid-y2iux7dg>backspace</span> </button> </div> </div> <!-- Settings --> <div class="flex flex-wrap items-center justify-between gap-4 mb-8 bg-black/20 p-4 rounded-2xl relative z-10" data-astro-cid-y2iux7dg> <div class="flex items-center gap-3" data-astro-cid-y2iux7dg> <button id="exampleBtn" class="text-xs font-bold text-primary hover:text-white transition-colors bg-primary/10 px-3 py-1.5 rounded-lg border border-primary/20" data-astro-cid-y2iux7dg>
Пример 22 : 7
</button> </div> <div class="flex items-center gap-4 text-xs text-slate-500 font-mono" data-astro-cid-y2iux7dg> <span class="uppercase tracking-wider" data-astro-cid-y2iux7dg>Макс стъпки:</span> <select id="limit" class="bg-slate-800 border border-slate-700 text-slate-300 rounded-lg px-2 py-1 outline-none cursor-pointer focus:border-primary" data-astro-cid-y2iux7dg> <option value="50" data-astro-cid-y2iux7dg>50</option> <option value="100" selected data-astro-cid-y2iux7dg>100</option> <option value="200" data-astro-cid-y2iux7dg>200</option> <option value="500" data-astro-cid-y2iux7dg>500</option> </select> </div> </div> <div id="error" class="hidden mb-6 rounded-xl border border-red-500/30 bg-red-500/10 text-red-400 p-4 font-medium relative z-10" data-astro-cid-y2iux7dg></div> <div id="resultWrap" class="hidden relative z-10 animate-in fade-in slide-in-from-bottom-4 duration-500" data-astro-cid-y2iux7dg> <div class="rounded-2xl bg-primary/5 border border-primary/10 p-6 mb-8" data-astro-cid-y2iux7dg> <div class="text-xs font-mono uppercase text-primary mb-2 tracking-widest" data-astro-cid-y2iux7dg>
Частно (Резултат)
</div> <div id="quotient" class="font-mono text-3xl md:text-4xl font-bold text-white break-all" data-astro-cid-y2iux7dg></div> </div> <div data-astro-cid-y2iux7dg> <div class="text-xs font-mono uppercase text-slate-500 mb-4 tracking-widest" data-astro-cid-y2iux7dg>
Визуализация
</div> <div id="steps" class="font-mono text-lg md:text-xl leading-relaxed overflow-x-auto whitespace-pre p-8 bg-black/40 rounded-3xl border border-white/5 shadow-inner" data-astro-cid-y2iux7dg></div> </div> </div> <div class="mt-8 text-[10px] font-mono uppercase tracking-tighter text-slate-600 border-t border-border-dark pt-4 relative z-10 flex justify-between items-center" data-astro-cid-y2iux7dg> <span data-astro-cid-y2iux7dg>School Style Visualization Engine v1.1</span> <span data-astro-cid-y2iux7dg>Bulgarian Educational Standard</span> </div> </div> <div class="mt-6 flex items-center gap-2 text-slate-500 text-sm" data-astro-cid-y2iux7dg> <span class="material-symbols-outlined text-sm" data-astro-cid-y2iux7dg>info</span> <span data-astro-cid-y2iux7dg>За десетична част се използва запетая <b data-astro-cid-y2iux7dg>(,)</b>.</span> </div> </main> <script>
        function showError(msg) {
            const el = document.getElementById("error");
            el.textContent = msg;
            el.classList.remove("hidden");
        }
        function hideError() {
            document.getElementById("error").classList.add("hidden");
        }

        function computeLongDivision(aRaw, bRaw, maxSteps) {
            if (!Number.isFinite(aRaw) || !Number.isFinite(bRaw)) {
                throw new Error("Моля, въведи валидни числа.");
            }
            if (bRaw === 0) throw new Error("Деление на 0 не е позволено.");

            let a = Math.trunc(aRaw);
            let b = Math.trunc(bRaw);

            const sign = (a < 0) ^ (b < 0) ? "-" : "";
            a = Math.abs(a);
            b = Math.abs(b);

            const integerPart = Math.floor(a / b);
            let remainder = a % b;

            const blocks = [];
            blocks.push({
                minuend: a,
                sub: integerPart * b,
                rem: remainder,
                indent: 0,
                hideSub: integerPart === 0 && a !== 0,
            });

            const decimals = [];
            const seenRemainders = new Map();
            let periodStart = -1;
            let step = 0;

            while (remainder !== 0 && step < maxSteps) {
                if (seenRemainders.has(remainder)) {
                    periodStart = seenRemainders.get(remainder);
                    break;
                }
                seenRemainders.set(remainder, decimals.length);

                const next = remainder * 10;
                const digit = Math.floor(next / b);
                const sub = digit * b;
                const newRem = next - sub;

                decimals.push(String(digit));
                blocks.push({
                    minuend: next,
                    sub: sub,
                    rem: newRem,
                    indent: step + String(integerPart).length + 1, // Offset by integer part length + comma
                });

                remainder = newRem;
                step++;
            }

            // Adjust indentation for steps - initial block indent is 0
            // Subsequent blocks should align under the dividend/remainders
            // In Bulgarian school math, we align under the last digit of the previous remainder/dividend multiplied by 10

            let q = sign + String(integerPart);
            if (decimals.length > 0) {
                q += ",";
                if (periodStart >= 0) {
                    const nonPeriod = decimals.slice(0, periodStart).join("");
                    const period = decimals.slice(periodStart).join("");
                    q += nonPeriod + "(" + period + ")";
                } else {
                    q += decimals.join("");
                }
            } else if (remainder !== 0) {
                q += ",";
            }

            const hitLimit =
                remainder !== 0 && periodStart < 0 && step >= maxSteps;
            if (hitLimit) q += "...";

            return { quotientString: q, blocks, periodStart, hitLimit };
        }

        function renderBlocks(blocks) {
            const lines = [];
            for (let i = 0; i < blocks.length; i++) {
                const blk = blocks[i];
                const indent = i === 0 ? 0 : i; // Simple increment for step visualization
                const minuendStr = String(blk.minuend);
                const subStr = String(blk.sub);
                const remStr = String(blk.rem);

                // A) Minuend
                lines.push(
                    `<div class="flex">` +
                        `<span class="inline-block" style="width:${indent}ch"></span>` +
                        `<span>${escapeHtml(minuendStr)}</span>` +
                        `</div>`,
                );

                if (!blk.hideSub) {
                    // B) Subtraction
                    const padding = Math.max(
                        0,
                        minuendStr.length - subStr.length,
                    );
                    lines.push(
                        `<div class="flex text-slate-400 relative">` +
                            `<span class="inline-block" style="width:${indent}ch">` +
                            `<span class="absolute" style="transform: translateX(-1.5ch)">-</span>` +
                            `</span>` +
                            `<span class="inline-block" style="width:${padding}ch"></span>` +
                            `<span>${escapeHtml(subStr)}</span>` +
                            `</div>`,
                    );

                    // C) Bar
                    const barWidth = Math.max(minuendStr.length, subStr.length);
                    lines.push(
                        `<div class="flex">` +
                            `<span class="inline-block" style="width:${indent}ch"></span>` +
                            `<div class="border-t-2 border-slate-500" style="width:${barWidth}ch"></div>` +
                            `</div>`,
                    );

                    // D) Remainder
                    const remPadding = Math.max(
                        0,
                        minuendStr.length - remStr.length,
                    );
                    lines.push(
                        `<div class="flex text-primary">` +
                            `<span class="inline-block" style="width:${indent + remPadding}ch"></span>` +
                            `<span>${escapeHtml(remStr)}</span>` +
                            `</div>`,
                    );
                } else {
                    // Placeholder bar for initial step if needed
                    const barWidth = minuendStr.length;
                    lines.push(
                        `<div class="flex">` +
                            `<span class="inline-block" style="width:${indent}ch"></span>` +
                            `<div class="border-t-2 border-slate-500" style="width:${barWidth}ch"></div>` +
                            `</div>`,
                    );
                    lines.push(
                        `<div class="flex text-primary">` +
                            `<span class="inline-block" style="width:${indent}ch"></span>` +
                            `<span>${escapeHtml(remStr)}</span>` +
                            `</div>`,
                    );
                }
                lines.push(`<div class="h-3"></div>`);
            }
            return lines.join("");
        }

        function escapeHtml(str) {
            return str
                .replaceAll("&", "&amp;")
                .replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;");
        }

        function run() {
            hideError();
            const a = Number(document.getElementById("a").value);
            const b = Number(document.getElementById("b").value);
            const maxSteps = Number(document.getElementById("limit").value);

            try {
                const { quotientString, blocks, hitLimit } =
                    computeLongDivision(a, b, maxSteps);

                const wrap = document.getElementById("resultWrap");
                wrap.classList.remove("hidden");

                document.getElementById("quotient").textContent =
                    quotientString;

                const stepsEl = document.getElementById("steps");
                stepsEl.innerHTML = renderBlocks(blocks);

                if (hitLimit) {
                    stepsEl.insertAdjacentHTML(
                        "beforeend",
                        `<div class="text-amber-400 text-sm mt-4 p-3 bg-amber-400/10 border border-amber-400/20 rounded-xl">
                            ⚠️ Достигнат е лимитът от ${maxSteps} стъпки. Увеличи лимита, ако искаш.
                         </div>`,
                    );
                }
            } catch (e) {
                document.getElementById("resultWrap").classList.add("hidden");
                showError(e.message || "Грешка.");
            }
        }

        const goBtn = document.getElementById("goBtn");
        const clearBtn = document.getElementById("clearBtn");
        const exampleBtn = document.getElementById("exampleBtn");

        goBtn.addEventListener("click", run);

        exampleBtn.addEventListener("click", () => {
            document.getElementById("a").value = 22;
            document.getElementById("b").value = 7;
            run();
        });

        clearBtn.addEventListener("click", () => {
            document.getElementById("a").value = "";
            document.getElementById("b").value = "";
            document.getElementById("resultWrap").classList.add("hidden");
            hideError();
        });

        ["a", "b"].forEach((id) => {
            document.getElementById(id).addEventListener("keydown", (e) => {
                if (e.key === "Enter") run();
            });
        });

        // initial render
        run();
    </script>   </div> </body></html> 